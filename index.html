<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Find your Chinese Zodiac Animal</title>
<style>
   body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
   }
   .result {
      font-size: 16px;
      font-weight: 100px;
   }
</style>
<script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />

<!-- Plugins: 
include jQuery, Moment.js and Date Range Picker's files 
-->

</head>
<body>
<h1>Find your Chinese Zodiac Animal & Star Sign</h1>
<p>To see the reasons for your Chinese Zodiac & Star Sign, please choose your date of birth:
</p>
<input type="text" name="birthday" value="10/24/1995" />
<button class="Btn">
   SHOW ME BELOW
   </button>
<div style="color: green;" class="result"></div>
<h3>
Click on the above button to find your Chinese Zodiac Animal & Star Sign!
</h3>
<script>

//Variables, 3 data points: year, month and day

   let yearPicked = 1995;
   let monthPicked = 10;
   let dayPicked = 24;
   let animalName = "";


//Animal Years Array, Object

let animalYears = [
    {
        Rat: [1924, 1936, 1948, 1960, 1972, 1984, 1996, 2008, 2020]
    },
    {
        Ox: [1925, 1937, 1949, 1961, 1973, 1985, 1997, 2009, 2021]
    },
    {
        Tiger: [1926, 1938, 1950, 1962, 1974, 1986, 1998, 2010, 2022]
    },
    {
        Rabbit: [1927, 1939, 1951, 1963, 1975, 1987, 1999, 2011, 2023]
    },
    {
        Dragon: [1928, 1940, 1952, 1964, 1976, 1988, 2000, 2012, 2024]
    },
    {
        Snake: [1929, 1941, 1953, 1965, 1977, 1989, 2001, 2013, 2025]
    },
    {
        Horse: [1930, 1942, 1954, 1966, 1978, 1990, 2002, 2014, 2026]
    },
    {
        Sheep: [1931, 1943, 1955, 1967, 1979, 1991, 2003, 2015, 2027]
    },
    {
        Monkey: [1932, 1944, 1956, 1968, 1980, 1992, 2004, 2016, 2028]
    },
    {
        Rooster: [1933, 1945, 1957, 1969, 1981, 1993, 2005, 2017, 2029]
    },
    {
        Dog: [1934, 1946, 1958, 1970, 1982, 1994, 2006, 2018, 2030]
    },
    {
        Pig: [1935, 1947, 1959, 1971, 1983, 1995, 2007, 2019, 2031]
    }
    ];


//Months

const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

//Date picker code:

$(function() {
  $('input[name="birthday"]').daterangepicker({
    singleDatePicker: true,
    showDropdowns: true,
    minYear: 1901,
    maxYear: parseInt(moment().format('YYYY'),10)
  }, function(start, end, label) {
    //Template instruction set for difference between now and chosen year
    //var years = moment().diff(start, 'years');
    //alert("You are " + years + " years old!");

    //Output of chosen year and month picked
     yearPicked = Number(end.format('YYYY'));
     monthPicked = Number(end.format('MM'));
     dayPicked = Number(end.format('DD'));

    //monthPicked = Number(monthPicked);
    //alert(monthPicked);
    });
});

//function: myAnimal
//input year of birth and output zodiac animal
//number -> string

console.log(typeof yearPicked);
console.log(yearPicked);
console.log(typeof monthPicked);
console.log(monthPicked);
console.log(typeof dayPicked);
console.log(dayPicked);

function myAnimal(num) {

    for (let i=0; i < animalYears.length; i++ ) {
        let obj = animalYears[i];
        let indi = [];
        Object.values(obj).forEach(val => { indi = val});

    //true of false from includes
    //console.log(indi.includes(yearofBirth));

    //need to find the element here and store it's key location
        if (indi.includes(num)) {
            animalName = Object.getOwnPropertyNames(obj);
        }      
    }
    return animalName;
}

console.log(myAnimal(yearPicked));


let resEle = document.querySelector(".result");

  function randMessage(){

    myAnimal(yearPicked);

    const constellations = ['Capricornus', 'Aquarius', 'Pisces', 'Aries', 'Taurus', 'Gemini', 'Cancer', 'Leo', 'Virgo', 'Libra', ' Scorpius / Ophiuchus', 'Sagittarius']
   
    let randmonth = months.filter(month => month === months[monthPicked-1]);

    let randconstellation = constellations.filter(constellation => constellation === constellations[monthPicked-1]);

    return `At the time of your birth in ${randmonth} ${yearPicked}, approximately ${2021 - yearPicked} years ago. The occurrence of this very spectacular event, caused you to be a ${animalName}. At the same time, the Sun was inside of the constellation of ${randconstellation}!!`
    };

    document.querySelector(".Btn").addEventListener("click", () => {
         resEle.innerHTML = randMessage();
     });

</script>
</body>
</html>
